
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.5">
    
    
      
        <title>REST - Eclipse Dirigible Help</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rest" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="Eclipse Dirigible Help" class="md-header-nav__button md-logo" aria-label="Eclipse Dirigible Help">
      
  <img src="../../../../img/logo/dirigible-logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Eclipse Dirigible Help
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              REST
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eclipse/dirigible/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eclipse/dirigible
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Help
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../overview/" class="md-tabs__link">
        Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../setup/" class="md-tabs__link">
        Setup
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Eclipse Dirigible Help" class="md-nav__button md-logo" aria-label="Eclipse Dirigible Help">
      
  <img src="../../../../img/logo/dirigible-logo.png" alt="logo">

    </a>
    Eclipse Dirigible Help
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eclipse/dirigible/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eclipse/dirigible
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Help
      </a>
    </li>
  

    
      
      
      


  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/" class="md-nav__link">
        Development & Operations
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3" >
      
      <label class="md-nav__link" for="nav-2-3">
        Artifacts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Artifacts" data-md-level="2">
        <label class="md-nav__title" for="nav-2-3">
          <span class="md-nav__icon md-icon"></span>
          Artifacts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../artifacts/data-files/" class="md-nav__link">
        Data Files
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../artifacts/database-table/" class="md-nav__link">
        Database Table
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4" checked>
      
      <label class="md-nav__link" for="nav-2-4">
        Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Concepts" data-md-level="2">
        <label class="md-nav__title" for="nav-2-4">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Concepts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-applications/" class="md-nav__link">
        Dynamic Applications
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../entity-service/" class="md-nav__link">
        Entity Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/" class="md-nav__link">
        Extension Definitions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../generation/" class="md-nav__link">
        Generation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mobile-apps/" class="md-nav__link">
        Mobile Apps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../publishing/" class="md-nav__link">
        Publishing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../repository/" class="md-nav__link">
        Repository
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          REST
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        REST
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-rest-services" class="md-nav__link">
    Creating REST services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serving-requests" class="md-nav__link">
    Serving requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-services" class="md-nav__link">
    Configuring services
  </a>
  
    <nav class="md-nav" aria-label="Configuring services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-service-resources" class="md-nav__link">
    Defining service resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-paths-and-path-templates" class="md-nav__link">
    Resource paths and path templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-http-methods-allowed-for-a-resource" class="md-nav__link">
    Defining HTTP methods allowed for a resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-content-types-that-an-api-consumes-and-produces" class="md-nav__link">
    Defining content types that an API consumes and produces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-processing-flow-and-events" class="md-nav__link">
    Request processing flow and events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-event-handling-functions" class="md-nav__link">
    Defining event handling functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    Advanced
  </a>
  
    <nav class="md-nav" aria-label="Advanced">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-configuration-objects" class="md-nav__link">
    Using configuration objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-senderror-method-in-httpcontroller" class="md-nav__link">
    The sendError method in HttpController
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-readonly-apis" class="md-nav__link">
    Defining readonly APIs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-a-resourcemethod-handler" class="md-nav__link">
    Disabling a ResourceMethod Handler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-service-with-explicit-requestresponse-arguments" class="md-nav__link">
    Executing service with explicit request/response arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluency-for-execute-method" class="md-nav__link">
    Fluency for execute method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mappings-vs-configurations" class="md-nav__link">
    Mappings vs Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-a-resourcemethod" class="md-nav__link">
    Finding a ResourceMethod
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-resource-with-js-object" class="md-nav__link">
    Configuring resource with JS object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#js-configuration-object-schema" class="md-nav__link">
    JS Configuration object schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-a-crud-rest-service" class="md-nav__link">
    Building a CRUD rest service
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../web-content/" class="md-nav__link">
        Web Content
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workspace/" class="md-nav__link">
        Workspace
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5" >
      
      <label class="md-nav__link" for="nav-2-5">
        Extensions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Extensions" data-md-level="2">
        <label class="md-nav__title" for="nav-2-5">
          <span class="md-nav__icon md-icon"></span>
          Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/editor/" class="md-nav__link">
        Editor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/perspective/" class="md-nav__link">
        Perspective
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/template/" class="md-nav__link">
        Template
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/view/" class="md-nav__link">
        View
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6" >
      
      <label class="md-nav__link" for="nav-2-6">
        Ide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Ide" data-md-level="2">
        <label class="md-nav__title" for="nav-2-6">
          <span class="md-nav__icon md-icon"></span>
          Ide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/" class="md-nav__link">
        IDE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/editor-monaco/" class="md-nav__link">
        Monaco Editor
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-3" type="checkbox" id="nav-2-6-3" >
      
      <label class="md-nav__link" for="nav-2-6-3">
        Modelers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modelers" data-md-level="3">
        <label class="md-nav__title" for="nav-2-6-3">
          <span class="md-nav__icon md-icon"></span>
          Modelers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/modelers/bpmn/" class="md-nav__link">
        BPMN
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/modelers/database-schema/" class="md-nav__link">
        Database Schema
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/modelers/entity-data/" class="md-nav__link">
        Entity Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/modelers/form-designer/" class="md-nav__link">
        Form Designer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-4" type="checkbox" id="nav-2-6-4" >
      
      <label class="md-nav__link" for="nav-2-6-4">
        Perspectives
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Perspectives" data-md-level="3">
        <label class="md-nav__title" for="nav-2-6-4">
          <span class="md-nav__icon md-icon"></span>
          Perspectives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/debugger/" class="md-nav__link">
        Debugger
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/documents/" class="md-nav__link">
        Documents
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/operations/" class="md-nav__link">
        Operations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/repository/" class="md-nav__link">
        Repository
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/terminal/" class="md-nav__link">
        Terminal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/perspectives/workbench/" class="md-nav__link">
        Workbench
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-5" type="checkbox" id="nav-2-6-5" >
      
      <label class="md-nav__link" for="nav-2-6-5">
        Views
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Views" data-md-level="3">
        <label class="md-nav__title" for="nav-2-6-5">
          <span class="md-nav__icon md-icon"></span>
          Views
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/access/" class="md-nav__link">
        Access
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/breakpoints/" class="md-nav__link">
        Breakpoints
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/console/" class="md-nav__link">
        Console
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/datastructures/" class="md-nav__link">
        Data Structures
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/debugger/" class="md-nav__link">
        Debugger
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/documents/" class="md-nav__link">
        Documents
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/import/" class="md-nav__link">
        Import
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/jobs/" class="md-nav__link">
        Jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/listeners/" class="md-nav__link">
        Listeners
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/logs/" class="md-nav__link">
        Logs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/preview/" class="md-nav__link">
        Preview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/repository/" class="md-nav__link">
        Repository
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/roles/" class="md-nav__link">
        Roles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/search/" class="md-nav__link">
        Search
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/snapshot/" class="md-nav__link">
        Snapshot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/sql/" class="md-nav__link">
        SQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/terminal/" class="md-nav__link">
        Terminal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/variables/" class="md-nav__link">
        Variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ide/views/workspace/" class="md-nav__link">
        Workspace
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Overview
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/" class="md-nav__link">
        Project
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/editors-modelers/" class="md-nav__link">
        Editors & Modelers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/engines/" class="md-nav__link">
        Engines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/features/" class="md-nav__link">
        Features
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/license/" class="md-nav__link">
        License
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/runtime-services/" class="md-nav__link">
        Runtime Services
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/" class="md-nav__link">
        Tomcat
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/cloud-foundry/" class="md-nav__link">
        Cloud Foundry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/setup-environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-rest-services" class="md-nav__link">
    Creating REST services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serving-requests" class="md-nav__link">
    Serving requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-services" class="md-nav__link">
    Configuring services
  </a>
  
    <nav class="md-nav" aria-label="Configuring services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-service-resources" class="md-nav__link">
    Defining service resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-paths-and-path-templates" class="md-nav__link">
    Resource paths and path templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-http-methods-allowed-for-a-resource" class="md-nav__link">
    Defining HTTP methods allowed for a resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-content-types-that-an-api-consumes-and-produces" class="md-nav__link">
    Defining content types that an API consumes and produces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-processing-flow-and-events" class="md-nav__link">
    Request processing flow and events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-event-handling-functions" class="md-nav__link">
    Defining event handling functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    Advanced
  </a>
  
    <nav class="md-nav" aria-label="Advanced">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-configuration-objects" class="md-nav__link">
    Using configuration objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-senderror-method-in-httpcontroller" class="md-nav__link">
    The sendError method in HttpController
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-readonly-apis" class="md-nav__link">
    Defining readonly APIs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-a-resourcemethod-handler" class="md-nav__link">
    Disabling a ResourceMethod Handler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-service-with-explicit-requestresponse-arguments" class="md-nav__link">
    Executing service with explicit request/response arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluency-for-execute-method" class="md-nav__link">
    Fluency for execute method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mappings-vs-configurations" class="md-nav__link">
    Mappings vs Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-a-resourcemethod" class="md-nav__link">
    Finding a ResourceMethod
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-resource-with-js-object" class="md-nav__link">
    Configuring resource with JS object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#js-configuration-object-schema" class="md-nav__link">
    JS Configuration object schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-a-crud-rest-service" class="md-nav__link">
    Building a CRUD rest service
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ThuF/dirigible-io.github.io/edit/master/docs-help/docs/development/concepts/rest.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="rest">REST</h1>
<p>The <code>http-rs</code> module is designed to define and run a broad range of HTTP REST services.</p>
<p>A very simple example <em><code>hello-api.js</code></em>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;http/rs&quot;</span><span class="p">);</span>

<span class="c1">// serve GET HTTP requests sent to resource path &quot;&quot; (i.e. directly to hello-api.js)</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
       <span class="p">})</span>
  <span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>Sending a <code>GET</code> request to <code>/services/v4/js/test/hello-api.js</code> to the server and hosting the <code>hello-api.js</code> piece of code above in <code>test/hello-api.js</code> will return response body:</p>
<blockquote>
<p><code>Hello there!</code>  </p>
</blockquote>
<h2 id="overview">Overview</h2>
<p>Let’s have a closer look at the methods shown in the example above.</p>
<p>First, we requested a new REST service instance from the framework:  </p>
<blockquote>
<p>rs.service()  </p>
</blockquote>
<p>Next, we configured the instance to serve HTTP GET requests sent to root path  <code>("")</code> using the supplied function:  </p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre></div>
<p>Technically, configuration is not required to execute a service, but obviously it will do nothing, if you don't instruct it what to do. </p>
<p>Finally, we run the service and it processes the HTTP request:  </p>
<blockquote>
<p>.execute();</p>
</blockquote>
<p>Now, this is a fairly simplistic example aiming to give you a hint of how you can bring up a REST API to life with <code>http-rs</code>. There is a whole lot more that we shall explore in the next sections.</p>
<h2 id="creating-rest-services">Creating REST services</h2>
<blockquote>
<p>rs.service()  </p>
</blockquote>
<p>Creating new service instances is as simple as invoking <code>rs.service()</code>. That returns a configurable and/or executable instance of the <code>HttpController</code> class. The controller API allows to:
- start configuring REST service (method <code>resource()</code>) 
- serve requests (method <code>execute()</code>) 
- perform a couple of more advanced activities, which will be reviewed in the <a href="#advanced">Advanced</a> section below </p>
<p>Additionally, the controller API features also shortcut factory methods that are useful for simplistic configurations (like the one in our initial example) such as <code>get(sPath, fServe, arrConsume, arrProduces)</code>. Read below for more examples how to use the methods.</p>
<h2 id="serving-requests">Serving requests</h2>
<blockquote>
<p>execute()</p>
</blockquote>
<p>The mechanism for serving requests is implemented in the <code>execute()</code> method of the <code>HttpController</code>. It tries to match the request to the service API configuration.</p>
<ul>
<li>If the mechanism matches the request successfully, it triggers the execution flow of the callback functions. The execution flow processes the request and response. </li>
<li>If the mechanism doesn't match the request successfully, it sends a <code>Bad Request</code> error to the client. </li>
</ul>
<p>The request and response objects are implicitly those that were used to request the script where the <code>execute()</code> method invocation occurred. But they can be exchanged for others as shown in the <a href="#advanced">Advanced</a> section. </p>
<p>The <code>execute()</code> method is defined in the service instance <em>(class <code>HttpController</code>)</em> obtained with <code>rs.service()</code>. The <code>execute()</code> method can be triggered with <code>rs.service().execute()</code>. The <code>rs</code> API configuration also provides numerous references to the method so you can invoke it on any stage. For example,</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">execute</span><span class="p">()</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">().</span><span class="nx">execute</span><span class="p">()</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">().</span><span class="nx">produces</span><span class="p">([</span><span class="s2">&quot;text/json&quot;</span><span class="p">]).</span><span class="nx">execute</span><span class="p">()</span>
</code></pre></div>
<p>are all valid ways to serve requests.</p>
<p>What you need to consider is that <code>execute()</code> must be the final method invocation. Even if you retain a reference to a configuration object and change it after that, it will be irrelevant since the response will be flushed and closed by then.</p>
<h2 id="configuring-services">Configuring services</h2>
<p>There are three options as far as configuration is concerned.</p>
<ul>
<li>You can start from scratch and build the configuration using the <code>rs</code> API.</li>
<li>You can use configuration objects. They are holding the configuration that the <code>rs</code> API produces.</li>
<li>You can start with a configuration object and then enhance or override the configuration using the <code>rs</code> API. </li>
</ul>
<blockquote>
<p><em><strong>Configuration objects</strong><br />
A configuration object is a JS object with canonical structure that the <em>http-rs</em> can interpret. We will discuss its schema later on in this guide. For now, let's just consider that it's the same thing that the rs-fluent API will actually produce behind the scenes so it's a completely valid alternative and complement to the rs-fluent API configuration approach.
Refer to the <a href="#advanced">Advanced</a> section for more details on using configuration objects.</em></p>
</blockquote>
<h4 id="defining-service-resources">Defining service resources</h4>
<blockquote>
<p>resource(sPath, oConfiguration?)</p>
</blockquote>
<p>Resources are the top-level configuration objects that represent an <a href="https://en.wikipedia.org/wiki/Web_resource">HTTP (server) resource</a>, for which we will be defining a protocol. Each resource is identified by a URL on the server. You can have multiple resources per service configuration, provided that their URLs do not overlap.</p>
<blockquote>
<p><em><strong>Resource vs Path vs Resource Path</strong><br />
As per the REST terms, a resource is an abstraction or a server-side resource that can be a file, a dynamically generated content, or a procedure (although the last is considered heresy by purists). It's virtually anything hosted on a server that has an address and can be accessed with a standard HTTP method. It is often referred to as <em>path</em> or <em>resource path</em> due to its singular most notable identifying characteristic. But to be precise, <em>path</em> is only a property of the resource. As far as configuration is concerned, the resource defines the configuration scope for which we define method handlers and constraints, and is identifiable by its <em>path</em> property.</em></p>
</blockquote>
<h4 id="resource-paths-and-path-templates">Resource paths and path templates</h4>
<p>The <code>sPath</code> string parameter of the <code>resource()</code> method will serve as the resource URL and it is obviously mandatory. The path is relative to the path of the service script that runs the service. No path, i.e. request directly to the script, is an empty string.
The path can also be a URL template, i.e. parameterized.<br />
For example consider the path template:  </p>
<blockquote>
<p>{id}/assets/{assetType}/{name}  </p>
</blockquote>
<p>This will resolve request paths such as:</p>
<blockquote>
<p>/services/js/test.js/1/assets/longterm/building </p>
</blockquote>
<p>to service path:</p>
<blockquote>
<p>1/assets/longterm/building  </p>
</blockquote>
<p>If a request is matched to such path, the service mechanism will provide the resolved parameters as an object map to the function that handles the request. Using the sample path above the path parameters object will look like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;assetType&quot;</span><span class="p">:</span> <span class="s2">&quot;longterm&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="defining-http-methods-allowed-for-a-resource">Defining HTTP methods allowed for a resource</h3>
<div class="highlight"><pre><span></span><code><span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>  
<span class="nx">resource</span><span class="p">.</span><span class="nx">post</span><span class="p">()</span>  
<span class="nx">resource</span><span class="p">.</span><span class="nx">put</span><span class="p">()</span>  
<span class="nx">resource</span><span class="p">[</span><span class="s2">&quot;delete&quot;</span><span class="p">]()</span> <span class="nx">and</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>    
<span class="nx">resource</span><span class="p">.</span><span class="nx">method</span><span class="p">()</span>
</code></pre></div>
<p>By default, only the HTTP request methods that you have configured for a resource are allowed. The fluent API of <code>Resource</code> instances, obtained with the <code>resource(sPath)</code> method that we discussed above, exposes the most popular REST API methods (<code>get</code>,<code>post</code>,<code>put</code> and <code>delete</code>). They are simply aliases for the generic method <code>method</code>.
Whichever we consider, we will receive a <code>ResourceMethod</code> instance from the invocation and its API will allow us to specify processing functions and further specify constraints on the request/response for which they are applicable:</p>
<blockquote>
<p>rs.resource('').get().produces(["application/json"]).serve(function(){})</p>
</blockquote>
<p>Alternatively, as we have already seen, we can supply the <code>serve</code> callback function directly as first argument to the method, which comes in handy if we have nothing more to setup:  </p>
<blockquote>
<p>rs.resource('').get(function(){})</p>
</blockquote>
<p>We can also use configuration object as a third option and this will be discussed in the <a href="#advanced">Advanced</a> section.<br />
The samples here are all for configuring HTTP GET Method but the usage pattern is still the same for all:  </p>
<blockquote>
<p>rs.resource('').post().consumes(["application/json"]).serve(function(){})</p>
</blockquote>
<p><strong>Shortcuts</strong></p>
<p>You already noticed that instead of explicitly using <strong>serve</strong> to configure callback for serving the requests we could directly provide the function as argument to the method configuring the HTTP method (e.g. <strong>get</strong>). </p>
<blockquote>
<p>rs.resource('').get(function(){}) <br />
rs.resource('').get().serve(function(){})</p>
</blockquote>
<p>So why bother provisioning an explicit <code>serve()</code> function in the first place then? The answer is that <code>serve()</code> configures only one of the callback functions that are triggered during the request processing flow. And this <em>shortcut</em> is handy if it is only <code>serve()</code> that you are interested into configuring. Of course, nothing prevents you also from using the shortcut and still configure the other callback functions, unless you find it confusing. These are all valid options. Find out more about configuring request processing callback functions in the section dedicated to this.</p>
<p>When the controller API was discussed, it was mentioned that there are shortcut factory methods that combine a couple operations to produce directly a method handler for a resource path.</p>
<p>Example</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
<span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>That would be equivalent to the following:</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">);</span>
      <span class="p">})</span>
<span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>These shortcut methods share the same names with those in <code>Resource</code> that are used for defining HTTP method handlers: <code>get</code>, <code>post</code>, <code>put</code>, <code>delete</code> and its alias <code>remove</code>, but differ in signature (first argument is a string for the resource path) and the return type (the <code>HttpController</code> instance, instead of <code>ResourceMethod</code>).</p>
<p>They are useful as a compact mechanism if you intend to build something simple and simplistic, such as a single resource and one or few handler functions for it. You will not be able to go much further with this API so if you consider anything even slightly more sophisticated you should look into the fluent API of <code>resource</code> instead: <code>rs.service().resource("")</code>.</p>
<blockquote>
<p>Note that the scope of these shortcut methods is the controller, not the resource. That has effect on the method chaining. For clean code, do not confuse despite the similar names and avoid mixing them.</p>
</blockquote>
<h3 id="defining-content-types-that-an-api-consumes-and-produces">Defining content types that an API consumes and produces</h3>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">().</span><span class="nx">produces</span><span class="p">(</span><span class="s2">&quot;[application/json]&quot;</span><span class="p">)</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">post</span><span class="p">().</span><span class="nx">consumes</span><span class="p">(</span><span class="s2">&quot;[application/json]&quot;</span><span class="p">)</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">put</span><span class="p">().</span><span class="nx">consumes</span><span class="p">(</span><span class="s2">&quot;[application/json]&quot;</span><span class="p">).</span><span class="nx">produces</span><span class="p">(</span><span class="s2">&quot;[application/json]&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Optionally, but also quite likely, we will add some constraints on the data type consumed and produced by the resource method handler that we configure. <br />
At request processing runtime, these constraints will be matched for compatibility against the HTTP request headers before delegating to the handler processing function. You can use wildcards (<em>) in the MIME types arguments both for type and sub-type and it will be considered as </em>anything* during the execution:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">post</span><span class="p">().</span><span class="nx">consumes</span><span class="p">(</span><span class="s2">&quot;[*/json]&quot;</span><span class="p">)</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">post</span><span class="p">().</span><span class="nx">consumes</span><span class="p">(</span><span class="s2">&quot;[*/*]&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="request-processing-flow-and-events">Request processing flow and events</h3>
<p>Before we continue, let us take a look at the request processing flow.  </p>
<ol>
<li>The request is matched against the resource method handling definitions in the configuration and if there is a compatible one it is elicited for execution. Otherwise, a Bad request error is returned back to the client.  </li>
<li>The <code>before</code> callback function is invoked if any was configured.</li>
<li>The <code>serve</code> callback function is invoked if any was configured.</li>
<li>If an <code>Error</code> was thrown from the <code>serve</code> function, a <code>catch</code> callback function is invoked. The callback function is either configured or the default one.</li>
<li>A <code>finally</code> (always executed) function is invoked if one was configured.</li>
</ol>
<p>Or in pseudocode:</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span> <span class="p">{</span>
  <span class="nx">before</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">);</span>
  <span class="nx">serve</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="k">catch</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">);</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
  <span class="k">finally</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>As evident form the flow, it is only the <code>serve</code> event callback handler function that is required to be setup. But if you require fine grained reaction to the other events, you can configure handlers for each of those you are interested in.
Currently, the API supports a single handler function per event so in multiple invocation of a setup method on the same resource method only the last will matter.</p>
<h3 id="defining-event-handling-functions">Defining event handling functions</h3>
<div class="highlight"><pre><span></span><code><span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
  <span class="c1">//Implements pre-processing logic</span>
<span class="p">})</span>
<span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
  <span class="c1">//Implements request-processing logic</span>
<span class="p">})</span>
<span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">resourceMethod</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
  <span class="c1">//Implements error-processing logic overriding the default</span>
<span class="p">})</span>  
<span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="k">finally</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="c1">//Implements post-processing logic regardless of error or success of the serve function</span>
<span class="p">})</span>
</code></pre></div>
<p>A valid, executable resource method configuration requires at least the <code>serve</code> callback function to be setup:  </p>
<p><div class="highlight"><pre><span></span><code><span class="nx">resource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
The rest are optional and/or have default implementations.  </p>
<p>Errors thrown from the <code>before</code> and <code>serve</code> callbacks are delegated to the <code>catch</code> callback. There is a default <code>catch</code> callback that sends formatted error back in the response and it can be overridden using the <code>catch</code> method to setup another error processing logic. The <code>finally</code> callback is invoked after the response has been flushed and closed (regardless if in error or success) and can be used to cleanup resources.<br />
Example:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">get</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
       <span class="nx">request</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">&#39;X-arestme-version&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0&#39;</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
       <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s1">&#39;Serving GET request&#39;</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;GET request processing finished&#39;</span><span class="p">);</span>
    <span class="p">})</span>
</code></pre></div>
<h2 id="advanced">Advanced</h2>
<h3 id="using-configuration-objects">Using configuration objects</h3>
<p>Configuration objects are particularly useful when you are enhancing or overriding an existing protocol so you don't start configuring from scratch but rather amend or change pieces of the configuration. It is also useful when you are dealing with dynamically generated HTTP-based protocol configurations. 
For example, consider the simple sample that we started with. It is completely identical with this one, which uses a configuration object and provides it to the <code>service</code> function:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">({</span>
  <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;get&quot;</span><span class="o">:</span><span class="p">[{</span>
      <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>It is also completely identical with this one: </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;get&quot;</span><span class="o">:</span><span class="p">[{</span>
      <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}).</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>or this one:</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">get</span><span class="p">([{</span>
        <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
          <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
        <span class="p">}</span>
     <span class="p">}]).</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>In fact, here is a sample how to define a whole API providing configuration directly to the service method and then enhance it. </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">({</span>
  <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;get&quot;</span><span class="o">:</span><span class="p">[{</span>
      <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">post</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readText</span><span class="p">());</span>
       <span class="p">})</span>
<span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>In this way we essentially are exploiting the fluent API to configure a service but we will not start from scratch. Many of the API methods accept as a second argument configuration object and this doesn't prevent you to continue the API design with fluent API to enhance or override it.</p>
<h3 id="the-senderror-method-in-httpcontroller">The sendError method in HttpController</h3>
<p>The <code>HttpController</code> class instances that we receive when <code>rs.service()</code> is invoked, features a <code>sendError</code> method. It implements the logic for formatting errors and returning them back to the client taking into account its type and content type preferences. 
Should you require to change this behavior globally you can redefine the function. If you require different behavior for particular resources or resource method handlers, then using the <code>catch</code> callback is the better approach.<br />
Sometimes it's useful to reuse the method and send error in your handler functions. The standard request processing mechanism in <code>HttpController</code> does not account for <em>logical</em> errors. It doesn't know for example that a parameter form a client input is out of valid range. For such cases you would normally implement validation either in <code>before</code> event handler or in serve. And if you need tighter control on what is sent back, e.g. the HTTP code you wouldn't simply throw an Error but invoke the sendError function with the right parameters yourself. For these purposes the last argument of each event handler function is conveniently the controller instance.</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">get</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">methodHandler</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
       <span class="c1">//check if requested file exists</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">()){</span>
         <span class="nx">controller</span><span class="p">.</span><span class="nx">sendError</span><span class="p">();</span>
       <span class="p">}</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="c1">//return file content</span>
    <span class="p">})</span>
</code></pre></div>
<h3 id="defining-readonly-apis">Defining readonly APIs</h3>
<blockquote>
<p>mappings.readonly()  </p>
</blockquote>
<p>An obvious way of defining readonly APIs is to use only <code>GET</code> resource methods definitions. In some cases though APIs can be created from external configuration that also contains other resource method handlers, or we can receive an API instance from another module factory, or we want to support two instances of the same API, one readonly and one with edit capabilities, with minimal code. In such cases, we already have non-GET resource methods that we have to get rid of somehow. Here the <code>readonly</code> method steps in and does exactly this - removes all but the GET resource handlers if any. </p>
<p>Example:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">post</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){});</span>
    <span class="p">.</span><span class="nx">get</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){});</span>
  <span class="p">.</span><span class="nx">readonly</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>If you inspect the configuration after <code>.readonly()</code> is invoked (use <code>resource("").configuration()</code>) you will notice that the post verb definition is gone. Consecutively, POST requests to this resource will end up in Bad Request (400).
Note that for this to work, this must be the last configuration action for a resource. Otherwise, you are resetting the resource configuration to readonly, only to define write methods again.
The <code>readonly</code> method is available both for <code>ResourceMapping</code> and <code>Resource</code> objects returned by either invocations of service <code>mappings()</code> method or retained references from configuration API invocations.</p>
<h3 id="disabling-a-resourcemethod-handler">Disabling a ResourceMethod Handler</h3>
<blockquote>
<p>api.disable(sPath, sVerb, arrConsumesTypes, arrProducesTypes)</p>
</blockquote>
<p>Similar to the use cases explored for the <code>readonly</code> method above yo might not be in full control of the definition of the API, but rather <em>takeover</em> at some point. Similar to the <code>readonly</code> method, this one will remove the handler definition identified by the four parameters - <em>resource path</em>, <em>resource verb</em>, <em>consumes constraint array</em> (not necessarily in same order), <em>produces constraint array</em> (not necessarily in same order), but it will do it for any verb, not only 'GET'. In that sense <code>readonly</code> is a specialization of this one only for GET verbs.  </p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">mappings</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">({</span>
  <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;post&quot;</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">serve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
    <span class="p">}],</span>
    <span class="s2">&quot;get&quot;</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">serve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">mappings</span><span class="p">();</span>
<span class="nx">mappings</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">);</span>
</code></pre></div>
<p>With this API definition, invoking <code>mappings.find("","get")</code> will return a reference to the only get handler defined there and you can manage it. Note that you get a reference to the configuration and not an API.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// add produces constraint and redefine the serve callback</span>
<span class="kd">var</span> <span class="nx">mappings</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(){}).</span><span class="nx">mappings</span><span class="p">();</span>
<span class="c1">//later in code</span>
<span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">mappings</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;get&quot;</span><span class="p">);</span>
<span class="nx">handler</span><span class="p">.</span><span class="nx">produces</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;application/json&quot;</span><span class="p">]</span>
<span class="nx">handler</span><span class="p">.</span><span class="nx">serve</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;I was redefined&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="executing-service-with-explicit-requestresponse-arguments">Executing service with explicit request/response arguments</h3>
<p>The request and response parameters of the execute method are optional. If you don't supply them, the service will take the request/response objects that were used to request the script. Most of the time this is what you want. However, supplying your own request and response arguments can be very handy for testing as you can easily mock and inspect them.</p>
<h3 id="fluency-for-execute-method">Fluency for execute method</h3>
<p>The <code>execute</code> method is defined by the service instance (<code>HttpController</code>) obtained with <code>rs.service()</code> and can be executed with: <code>rs.service().execute()</code>. The fluent configuration API also provides references to the method, so you can actually invoke it on any stage. Examples:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(){}).</span><span class="nx">execute</span><span class="p">()</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">().</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){}).</span><span class="nx">execute</span><span class="p">()</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">().</span><span class="nx">produces</span><span class="p">([</span><span class="s2">&quot;text/json&quot;</span><span class="p">]).</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){}).</span><span class="nx">execute</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span>
  <span class="p">.</span><span class="nx">service</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">produces</span><span class="p">([</span><span class="s2">&quot;application/json&quot;</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(){})</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">consumes</span><span class="p">([</span><span class="s2">&quot;*/json&quot;</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(){})</span>
  <span class="p">.</span><span class="nx">execute</span><span class="p">()</span>
</code></pre></div>
<h3 id="mappings-vs-configurations">Mappings vs Configurations</h3>
<p>The API supplies two methods <code>mappings()</code> and <code>configuration()</code> that provide configuration in two forms. 
The mappings method supplies typed API objects such as <code>Resource</code> aggregating <code>ResourceMethod</code> instances. To get a reference to a service mappings, invoke mappings on the service instance: </p>
<blockquote>
<p>rs.service().mappings()</p>
</blockquote>
<p>With a reference to mappings you have their fluent API at disposal. This is useful when extending and enhancing the core rs functionality to build dedicated services. For example the <code>HttpController</code> constructor function is designed to accept mappings and if you extend or initialize it internally in another API you will likely need this form of configuration.</p>
<p>An invocation of the configuration method on the other hand provides the underlying JS configuration object. It can be used to supply generic configurations that are used to initialize new types of services as the public fluent API is designed to accept this form of configuration.</p>
<p>Both are represent configuration but while the mappings are sort of internal, <em>parsed</em> version, the configuration object is the version that the public api accepts and is also therefore kind of advanced public form of the internal configuration.</p>
<p>It is also possible to convert between the two:  </p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="nx">jsConfig</span><span class="p">).</span><span class="nx">mappings</span><span class="p">()</span>  
<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">().</span><span class="nx">resource</span><span class="p">().</span><span class="nx">configuration</span><span class="p">()</span> 
</code></pre></div>
<h3 id="finding-a-resourcemethod">Finding a ResourceMethod</h3>
<blockquote>
<p>rs.service().mappings().find(sPath, sMethod, arrConsumesTypes, arrProducesTypes)</p>
</blockquote>
<p>Suppose you want to redefine a handler definition to e.g. change the <code>serve</code> callback, add a <code>before</code> handler, change or add to the <code>consumes</code> media types constraint etc. To do that you need a reference to the handler, which is identified by the four parameters - <em>resource path</em>, <em>resource method</em>, <em>consumes constraint array</em> (not necessarily in same order), <em>produces constraint array</em> (not necessarily in same order). On a successful search hit you get a reference to the handler definition and can perform changes on it. </p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(){});</span>
</code></pre></div>
<p>With this API definition, invoking  </p>
<blockquote>
<p>rs.service().mappings().find("","get")  </p>
</blockquote>
<p>will return a reference to the only <code>get</code> handler defined there and you can manage it. Note that you get a reference to the configuration and not an API.  </p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// add produces constraint and redefine the serve callback</span>
<span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">svc</span><span class="p">.</span><span class="nx">mappings</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;get&quot;</span><span class="p">);</span>
<span class="nx">handler</span><span class="p">.</span><span class="nx">produces</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;application/json&quot;</span><span class="p">]</span>
<span class="nx">handler</span><span class="p">.</span><span class="nx">serve</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;I was redefined&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>With consumes and produces constraints on a resource method handler, getting a reference will require them specified too.</p>
<p>Example:  </p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">svc</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">();</span>
<span class="nx">svc</span><span class="p">.</span><span class="nx">mapings</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">post</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">consumes</span><span class="p">([</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;text/json&#39;</span><span class="p">])</span> 
      <span class="p">.</span><span class="nx">produces</span><span class="p">([</span><span class="s1">&#39;application/json&#39;</span><span class="p">])</span> 
      <span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="kd">function</span><span class="p">(){});</span>

<span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">svc</span><span class="p">.</span><span class="nx">mapings</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;text/json&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;application/json&#39;</span><span class="p">]);</span>
</code></pre></div>
<p>Note, that the order of the MIME type string values in the consumes/produces array parameters is not significant. They will be sorted before matching the sorted corresponding arrays in the definition.</p>
<h3 id="configuring-resource-with-js-object">Configuring resource with JS object</h3>
<p>Having defined a resource with path we have two options for configuring it. We can proceed using its fluent API or we can provision a configuration JS object as second argument to the <code>resource</code> method and have it done in one step. Considering the latter, we will be provisioning configuration for this resource only, so it should be an object with method definitions as root members.</p>
<div class="highlight"><pre><span></span><code><span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;get&quot;</span><span class="o">:</span><span class="p">[{</span>
      <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
         <span class="nx">response</span><span class="p">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">&quot;Hello there!&quot;</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}).</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>Refer to the next sections for comparison how to achieve the same, using fluent API and/or configuration objects on the lower levels.</p>
<h2 id="js-configuration-object-schema">JS Configuration object schema</h2>
<p>In progress. Check back later.</p>
<p>Schema:  </p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nx">pathString</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">methodString</span><span class="o">:</span> <span class="p">[{</span>
      <span class="s2">&quot;consumes&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;types/subtype|*/subtype|type/*|*/*&quot;</span><span class="p">]</span>
      <span class="s2">&quot;produces&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;types/subtype|*/subtype|type/*|*/*&quot;</span><span class="p">]</span>
      <span class="s2">&quot;before&quot;</span><span class="o">:</span> <span class="nb">Function</span>
      <span class="s2">&quot;serve&quot;</span><span class="o">:</span> <span class="nb">Function</span>
      <span class="s2">&quot;catch&quot;</span><span class="o">:</span> <span class="nb">Function</span>
      <span class="s2">&quot;finally&quot;</span><span class="o">:</span> <span class="nb">Function</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><code>pathString</code> is a string that represents the resource path. There could be 0 or more such non-overlapping members.  </li>
<li><code>methodString</code> is a string for the HTTP resource method. There could be 0 or more such non-overlapping members.  </li>
<li>The value of methodString is an array of 0 or more objects, each defining a request method processing that will be executed under unique conditions (constraints) that match the request. </li>
<li>A component in the methodString array, can consist of constraints (consumes, produces) and request processing flow event handlers (before, serve, catch, finally)  </li>
<li><code>consumes</code> value is an array of 0 or more strings, each a valid MIME type string formatted as <strong>types/subtype</strong>. Can be undefined.</li>
<li><code>produces</code> value is an array of 0 or more strings, each a valid MIME type string formatted as <strong>types/subtype</strong>. Can be undefined.</li>
<li><code>before</code>, <code>serve</code>, <code>catch</code> and <code>finally</code> values are functions. Except for the <code>serve</code> function, the rest can be <code>undefined</code>.</li>
</ul>
<h2 id="building-a-crud-rest-service">Building a CRUD rest service</h2>
<p>The code snippet below shows a sample design for a REST API for simple CRUD file operations. It has illustrative purposes.  </p>
<p>The service design is to work with files in the HOME directory of the user that runs the dirigible instance currently. Users can create, read, update and delete files by sending corresponding POST, GET, PUT and DELETE requests using the file name as path segment (e.g. <code>/services/js/file-serivce.js/test.json</code>) and they can also upload files if they don't specify file name but send multipart-form-data POST request directly to the service (e.g. <code>/services/js/file-serivce.js</code>).</p>
<p>Note how the <code>before</code> handler is used to validate user has permissions on resources and how it makes use of controller's <code>sendError</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">LOGGER</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;log/v4/logging&quot;</span><span class="p">).</span><span class="nx">getLogger</span><span class="p">(</span><span class="s1">&#39;http.filesvc&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;http/v4/rs&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">upload</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http/v4/upload&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;io/v4/files&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;security/v4/user&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">env</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;core/v4/env&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">validateRequest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permissions</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">methodHandler</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">files</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="nx">filePath</span><span class="p">)){</span>
        <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Requested file &quot;</span><span class="o">+</span><span class="nx">filePath</span><span class="o">+</span><span class="s2">&quot; does not exist.&quot;</span><span class="p">);</span>
        <span class="nx">controller</span><span class="p">.</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">NOT_FOUND</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">HttpCodesReasons</span><span class="p">.</span><span class="nx">getReason</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">NOT_FOUND</span><span class="p">)),</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span> <span class="o">+</span> <span class="s2">&quot; does not exist.&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">permissions</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">resourcePermissions</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">getPermissions</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">resourcePermissions</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">resourcePermissions</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">permissions</span><span class="p">)</span><span class="o">&gt;-</span><span class="mf">1</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">loggedUser</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
            <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;User {} does not have sufficient permissions[{}] for {}&quot;</span><span class="p">,</span> <span class="nx">loggedUser</span><span class="p">,</span> <span class="nx">files</span><span class="p">.</span><span class="nx">getPermissions</span><span class="p">(</span><span class="nx">filePath</span><span class="p">),</span> <span class="nx">filePath</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">HttpCodesReasons</span><span class="p">.</span><span class="nx">getReason</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">)),</span> <span class="s2">&quot;User &quot;</span> <span class="o">+</span> <span class="nx">loggedUser</span> <span class="o">+</span> <span class="s2">&quot; does not have sufficient permissions for &quot;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;validation successfull&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">postProcess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">operationName</span><span class="p">){</span>
    <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;{} operation finished&quot;</span><span class="p">,</span> <span class="nx">operationName</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">rs</span><span class="p">.</span><span class="nx">service</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">fileItems</span> <span class="o">=</span> <span class="nx">upload</span><span class="p">.</span><span class="nx">parseRequest</span><span class="p">();</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">fileItems</span><span class="p">.</span><span class="nx">size</span><span class="p">();</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">content</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">fileItem</span> <span class="o">=</span> <span class="nx">fileItems</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fileItem</span><span class="p">.</span><span class="nx">isFormField</span><span class="p">())</span> <span class="p">{</span>
                        <span class="nx">filePath</span> <span class="o">+=</span> <span class="nx">fileItem</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
                        <span class="nx">content</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">fileItem</span><span class="p">.</span><span class="nx">getBytes</span><span class="p">());</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">filePath</span> <span class="o">+=</span> <span class="nx">fileItem</span><span class="p">.</span><span class="nx">getFieldName</span><span class="p">();</span>
                        <span class="nx">content</span> <span class="o">=</span> <span class="nx">fileItem</span><span class="p">.</span><span class="nx">getText</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Creating file&quot;</span> <span class="o">+</span> <span class="nx">filePath</span><span class="p">);</span>
                    <span class="nx">files</span><span class="p">.</span><span class="nx">writeText</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">setStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">CREATED</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">methodHandler</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">loggedUser</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">files</span><span class="p">.</span><span class="nx">getOwner</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">loggedUser</span><span class="p">)</span>
                    <span class="nx">controller</span><span class="p">.</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">HttpCodesReasons</span><span class="p">.</span><span class="nx">getReason</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">)),</span> <span class="nx">loggedUser</span> <span class="o">+</span> <span class="s2">&quot; is not owner of &quot;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="nx">postProcess</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Upload&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">consumes</span><span class="p">([</span><span class="s2">&quot;multipart/form-data&quot;</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s2">&quot;{fileName}&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getText</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
                <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Creating file &quot;</span> <span class="o">+</span> <span class="nx">filePath</span><span class="p">);</span>
                <span class="nx">files</span><span class="p">.</span><span class="nx">writeText</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>
                <span class="nx">files</span><span class="p">.</span><span class="nx">setPermissions</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">);</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">setStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">CREATED</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="nx">postProcess</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Create&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">consumes</span><span class="p">([</span><span class="s2">&quot;application/json&quot;</span><span class="p">])</span>
        <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
                <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Reading file &quot;</span> <span class="o">+</span> <span class="nx">filePath</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">readText</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">setStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">OK</span><span class="p">);</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">validateRequest</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">))</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="nx">postProcess</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Read&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">produces</span><span class="p">([</span><span class="s2">&quot;application/json&quot;</span><span class="p">])</span>
        <span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
                <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Updating file &quot;</span> <span class="o">+</span> <span class="nx">filePath</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">();</span>
                <span class="nx">files</span><span class="p">.</span><span class="nx">deleteFile</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
                <span class="nx">files</span><span class="p">.</span><span class="nx">writeText</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">setStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ACCEPTED</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="nx">postProcess</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Update&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">validateRequest</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">consumes</span><span class="p">([</span><span class="s2">&quot;application/json&quot;</span><span class="p">])</span>
        <span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
                <span class="nx">LOGGER</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Removing file &quot;</span> <span class="o">+</span> <span class="nx">filePath</span><span class="p">);</span>
                <span class="nx">files</span><span class="p">.</span><span class="nx">deleteFile</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">setStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">NO_CONTENT</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">validateRequest</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">))</span>
            <span class="p">.</span><span class="k">finally</span><span class="p">(</span><span class="nx">postProcess</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
</code></pre></div>
<p>You can find the complete documentation for <a href="../../../../api/http/rs/">http/rs</a> and <a href="../../../../api/http/rs-data/">http/rs-data</a> under the API <a href="../../../../api/">page</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../repository/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Repository
              </div>
            </div>
          </a>
        
        
          <a href="../web-content/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Web Content
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2010-2021 Eclipse Foundation, Inc. All Rights Reserved. Eclipse is a registered trademark of the Eclipse Foundation, Inc. Dirigible is a trademark of the Eclipse Foundation, Inc.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/dirigible_io" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.facebook.com/dirigible.io" target="_blank" rel="noopener" title="www.facebook.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/groups/8413366" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/c/dirigibleio" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://eclipse-dirigible.slack.com/" target="_blank" rel="noopener" title="eclipse-dirigible.slack.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.instant', 'navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>